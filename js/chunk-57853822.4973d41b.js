(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57853822"],{1071:function(e,t,n){"use strict";n.r(t);n("99af"),n("b0c0");var c=n("7a23"),r=function(e){return Object(c["pushScopeId"])("data-v-dbabe732"),e=e(),Object(c["popScopeId"])(),e},o=r((function(){return Object(c["createElementVNode"])("strong",null,"注意",-1)})),a=Object(c["createTextVNode"])(" 活动一经发布，活动名称、所在校区及活动地点将"),u=r((function(){return Object(c["createElementVNode"])("strong",null,"无法",-1)})),i=Object(c["createTextVNode"])("修改，已有的工作岗位及时段将"),d=r((function(){return Object(c["createElementVNode"])("strong",null,"无法",-1)})),l=Object(c["createTextVNode"])("删除或者修改其名称或时间。 "),b=r((function(){return Object(c["createElementVNode"])("strong",null,"基本信息",-1)})),s=Object(c["createTextVNode"])("名称"),f=Object(c["createTextVNode"])("校区"),O=Object(c["createTextVNode"])("地点"),j=Object(c["createTextVNode"])("简介"),p=Object(c["createTextVNode"])("报名截止时间"),m=r((function(){return Object(c["createElementVNode"])("strong",null,"工作岗位及时段",-1)})),h=Object(c["createTextVNode"])("岗位名"),V=Object(c["createTextVNode"])("人数"),N=Object(c["createTextVNode"])(" - "),v=Object(c["createTextVNode"])(" + "),C=Object(c["createTextVNode"])("日期"),w=Object(c["createTextVNode"])("时间"),x=Object(c["createTextVNode"])("添加时段"),y=Object(c["createTextVNode"])("发布活动"),_=Object(c["createTextVNode"])("添加时段"),g=Object(c["createTextVNode"])("修改活动"),k=Object(c["createTextVNode"])("删除活动");function T(e,t,n,r,T,B){var U=Object(c["resolveComponent"])("el-col"),P=Object(c["resolveComponent"])("el-row"),A=Object(c["resolveComponent"])("el-input"),E=Object(c["resolveComponent"])("el-radio"),D=Object(c["resolveComponent"])("el-radio-group"),S=Object(c["resolveComponent"])("el-date-picker"),$=Object(c["resolveComponent"])("el-input-number"),M=Object(c["resolveComponent"])("el-button"),H=Object(c["resolveComponent"])("el-time-picker"),F=Object(c["resolveComponent"])("el-collapse-item"),I=Object(c["resolveComponent"])("el-collapse"),J=Object(c["resolveComponent"])("el-popconfirm");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(T.id?"修改活动":"发布活动"),1),T.id?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(P,{key:0},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:6},{default:Object(c["withCtx"])((function(){return[o]})),_:1}),Object(c["createVNode"])(U,{span:18},{default:Object(c["withCtx"])((function(){return[a,u,i,d,l]})),_:1})]})),_:1})),Object(c["createVNode"])(P,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:24},{default:Object(c["withCtx"])((function(){return[b]})),_:1}),Object(c["createVNode"])(U,{span:0})]})),_:1}),Object(c["createVNode"])(P,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:6},{default:Object(c["withCtx"])((function(){return[s]})),_:1}),Object(c["createVNode"])(U,{span:18},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(A,{modelValue:T.v.title,"onUpdate:modelValue":t[0]||(t[0]=function(e){return T.v.title=e}),disabled:Boolean(T.id)},null,8,["modelValue","disabled"])]})),_:1})]})),_:1}),Object(c["createVNode"])(P,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:6},{default:Object(c["withCtx"])((function(){return[f]})),_:1}),Object(c["createVNode"])(U,{span:18},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(D,{modelValue:T.v.campus,"onUpdate:modelValue":t[1]||(t[1]=function(e){return T.v.campus=e}),disabled:Boolean(T.id)},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(T.campuses,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(E,{key:t,label:t},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e),1)]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue","disabled"])]})),_:1})]})),_:1}),Object(c["createVNode"])(P,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:6},{default:Object(c["withCtx"])((function(){return[O]})),_:1}),Object(c["createVNode"])(U,{span:18},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(A,{modelValue:T.v.site,"onUpdate:modelValue":t[2]||(t[2]=function(e){return T.v.site=e}),disabled:Boolean(T.id)},null,8,["modelValue","disabled"])]})),_:1})]})),_:1}),Object(c["createVNode"])(P,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:6},{default:Object(c["withCtx"])((function(){return[j]})),_:1}),Object(c["createVNode"])(U,{span:18},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(A,{type:"textarea",modelValue:T.v.desc,"onUpdate:modelValue":t[3]||(t[3]=function(e){return T.v.desc=e}),autosize:{minRows:4,maxRows:8}},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(c["createVNode"])(P,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:6},{default:Object(c["withCtx"])((function(){return[p]})),_:1}),Object(c["createVNode"])(U,{span:18},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(S,{type:"datetime",modelValue:T.v.due,"onUpdate:modelValue":t[4]||(t[4]=function(e){return T.v.due=e})},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(c["createVNode"])(P,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:24},{default:Object(c["withCtx"])((function(){return[m]})),_:1}),Object(c["createVNode"])(U,{span:0})]})),_:1}),Object(c["createVNode"])(I,{modelValue:T.collapseActiveNames,"onUpdate:modelValue":t[5]||(t[5]=function(e){return T.collapseActiveNames=e})},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(T.v.periods,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(F,{key:e.start,title:"时段 ".concat(t+1).concat(e.name?"：".concat(e.name):"","（需 ").concat(e.need," 人）"),name:t},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(P,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:6},{default:Object(c["withCtx"])((function(){return[h]})),_:1}),Object(c["createVNode"])(U,{span:18},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(A,{modelValue:e.name,"onUpdate:modelValue":function(t){return e.name=t},disabled:t<T.periodsCount},null,8,["modelValue","onUpdate:modelValue","disabled"])]})),_:2},1024)]})),_:2},1024),Object(c["createVNode"])(P,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:6},{default:Object(c["withCtx"])((function(){return[V]})),_:1}),Object(c["createVNode"])(U,{span:18},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])($,{modelValue:e.need,"onUpdate:modelValue":function(t){return e.need=t},min:1},null,8,["modelValue","onUpdate:modelValue"]),t>=T.periodsCount?(Object(c["openBlock"])(),Object(c["createBlock"])(M,{key:0,class:"ml",type:"danger",onClick:function(e){return B.deletePeriod(t)}},{default:Object(c["withCtx"])((function(){return[N]})),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(M,{type:"primary",class:"ml",onClick:function(e){return B.copyPeriod(t)}},{default:Object(c["withCtx"])((function(){return[v]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024),Object(c["createVNode"])(P,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:6},{default:Object(c["withCtx"])((function(){return[C]})),_:1}),Object(c["createVNode"])(U,{span:18},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(S,{type:"date",modelValue:e.date,"onUpdate:modelValue":function(t){return e.date=t},"arrow-control":""},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)]})),_:2},1024),Object(c["createVNode"])(P,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:6},{default:Object(c["withCtx"])((function(){return[w]})),_:1}),Object(c["createVNode"])(U,{span:18},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(H,{modelValue:e.time,"onUpdate:modelValue":function(t){return e.time=t},format:"HH:mm",disabled:t<T.periodsCount,"is-range":"","arrow-control":"","disabled-hours":B.disabledHours},null,8,["modelValue","onUpdate:modelValue","disabled","disabled-hours"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["title","name"])})),128))]})),_:1},8,["modelValue"]),T.id?(Object(c["openBlock"])(),Object(c["createBlock"])(P,{key:2},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:24},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(M,{type:"primary",onClick:B.addPeriod},{default:Object(c["withCtx"])((function(){return[_]})),_:1},8,["onClick"]),Object(c["createVNode"])(M,{type:"primary",onClick:B.update,disabled:!B.canUpdate},{default:Object(c["withCtx"])((function(){return[g]})),_:1},8,["onClick","disabled"]),Object(c["createVNode"])(J,{title:"确定要删除该活动吗？",onConfirm:B.deleteActivity},{reference:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(M,{type:"danger"},{default:Object(c["withCtx"])((function(){return[k]})),_:1})]})),_:1},8,["onConfirm"])]})),_:1}),Object(c["createVNode"])(U,{span:0})]})),_:1})):(Object(c["openBlock"])(),Object(c["createBlock"])(P,{key:1},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(U,{span:24},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(M,{type:"primary",onClick:B.addPeriod},{default:Object(c["withCtx"])((function(){return[x]})),_:1},8,["onClick"]),Object(c["createVNode"])(J,{title:"您确定输入的信息准确无误吗？",onConfirm:B.update},{reference:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(M,{type:"primary",disabled:!B.canUpdate},{default:Object(c["withCtx"])((function(){return[y]})),_:1},8,["disabled"])]})),_:1},8,["onConfirm"])]})),_:1}),Object(c["createVNode"])(U,{span:0})]})),_:1}))],64)}n("b64b"),n("a4d3"),n("4de4"),n("d3b7"),n("e439"),n("159b"),n("dbb4");function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n("bf19"),n("a434"),n("7db0");var A=n("c72e"),E=n.n(A),D=n("5a0c"),S={name:"Edit",data:function(){var e=this.$route.params.id;return{campuses:["西土城","沙河","宏福"],collapseActiveNames:[],periodsCount:0,id:e,v:{title:"",campus:E.a.User.current().get("campus"),site:"",desc:"",due:void 0,periods:[]}}},computed:{canUpdate:function(){return this.v.title&&void 0!==this.v.campus&&this.v.site&&this.v.due&&this.v.periods.length}},beforeMount:function(){var e=this;if(this.id){var t=new E.a.Query("Activity");return t.get(this.id).then((function(t){e.v=t.toJSON(),e.periodsCount=e.v.periods.length}))}},methods:{disabledHours:function(){return[0,1,2,3,4,5,22,23]},addPeriod:function(){this.v.periods.push({date:new Date,time:[D().hour(12).minute(0).second(0).toDate(),D().hour(12).minute(0).second(0).toDate()],name:"",need:10}),this.collapseActiveNames.push(this.v.periods.length-1)},deletePeriod:function(e){this.v.periods.splice(e,1)},copyPeriod:function(e){this.v.periods.push(P({},this.v.periods[e])),this.collapseActiveNames.push(this.v.periods.length-1)},update:function(){var e,t=this;this.id?e=E.a.Object.createWithoutData("Activity",this.id):(e=new E.a.Object("Activity"),e.set("title",this.v.title),e.set("campus",this.v.campus),e.set("site",this.v.site),e.set("from",E.a.User.current())),e.set("maxNeed",this.v.periods.reduce((function(e,t){return e+t.need}),0)),e.set("desc",this.v.desc),e.set("due",D(this.v.due).toDate()),e.set("periods",this.v.periods),e.save().then((function(){t.$message({message:"".concat(t.id?"修改":"发布","活动成功。"),type:"success"}),t.$router.push("/")})).catch((function(e){return t.$store.commit("catchError",e)}))},deleteActivity:function(){var e=this;if(this.id){var t=E.a.Object.createWithoutData("Activity",this.id),n=new E.a.Query("UserActivityMap");n.equalTo("activity",t).find().then((function(e){return E.a.Object.destroyAll(e)})).then((function(){return t.destroy()})).then((function(){e.$message({message:"删除活动成功。",type:"success"}),e.$router.push("/")})).catch((function(t){return e.$store.commit("catchError",t)}))}}}},$=(n("fe35"),n("6b0d")),M=n.n($);const H=M()(S,[["render",T],["__scopeId","data-v-dbabe732"]]);t["default"]=H},"49a2":function(e,t,n){},"4de4":function(e,t,n){"use strict";var c=n("23e7"),r=n("b727").filter,o=n("1dde"),a=o("filter");c({target:"Array",proto:!0,forced:!a},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},a434:function(e,t,n){"use strict";var c=n("23e7"),r=n("da84"),o=n("23cb"),a=n("5926"),u=n("07fa"),i=n("7b0b"),d=n("65f0"),l=n("8418"),b=n("1dde"),s=b("splice"),f=r.TypeError,O=Math.max,j=Math.min,p=9007199254740991,m="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!s},{splice:function(e,t){var n,c,r,b,s,h,V=i(this),N=u(V),v=o(e,N),C=arguments.length;if(0===C?n=c=0:1===C?(n=0,c=N-v):(n=C-2,c=j(O(a(t),0),N-v)),N+n-c>p)throw f(m);for(r=d(V,c),b=0;b<c;b++)s=v+b,s in V&&l(r,b,V[s]);if(r.length=c,n<c){for(b=v;b<N-c;b++)s=b+c,h=b+n,s in V?V[h]=V[s]:delete V[h];for(b=N;b>N-c+n;b--)delete V[b-1]}else if(n>c)for(b=N-c;b>v;b--)s=b+c-1,h=b+n-1,s in V?V[h]=V[s]:delete V[h];for(b=0;b<n;b++)V[b+v]=arguments[b+2];return V.length=N-c+n,r}})},b64b:function(e,t,n){var c=n("23e7"),r=n("7b0b"),o=n("df75"),a=n("d039"),u=a((function(){o(1)}));c({target:"Object",stat:!0,forced:u},{keys:function(e){return o(r(e))}})},dbb4:function(e,t,n){var c=n("23e7"),r=n("83ab"),o=n("56ef"),a=n("fc6a"),u=n("06cf"),i=n("8418");c({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){var t,n,c=a(e),r=u.f,d=o(c),l={},b=0;while(d.length>b)n=r(c,t=d[b++]),void 0!==n&&i(l,t,n);return l}})},e439:function(e,t,n){var c=n("23e7"),r=n("d039"),o=n("fc6a"),a=n("06cf").f,u=n("83ab"),i=r((function(){a(1)})),d=!u||i;c({target:"Object",stat:!0,forced:d,sham:!u},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},fe35:function(e,t,n){"use strict";n("49a2")}}]);
//# sourceMappingURL=chunk-57853822.4973d41b.js.map